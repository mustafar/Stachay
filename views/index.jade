extends layout

block content

  #mainContent
    video(id="video", height="426", width="640", controls="false", autoplay)
    canvas(id="canvas", height="426", width="640")

  script (type='text/javascript')

    $(document).ready(function () {
      // Grab elements, create settings, etc.
      var canvas = $("#canvas")[0],
        context = canvas.getContext("2d"),
        video = $("#video")[0],
        videoObj = { "video": true },
        errBack = function(error) {
          console.log("Video capture error: ", error.code); 
        };

      // Put video listeners into place
      if(navigator.getUserMedia) { // Standard
        navigator.getUserMedia(videoObj, function(stream) {
          video.src = stream;
          video.play();
        }, errBack);
      } else if(navigator.webkitGetUserMedia) { // WebKit-prefixed
        navigator.webkitGetUserMedia(videoObj, function(stream){
          video.src = window.webkitURL.createObjectURL(stream);
          video.play();
        }, errBack);
      }
    });
